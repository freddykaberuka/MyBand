<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-firestore.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.24.0/firebase-auth.js"></script>
    <link rel='stylesheet' type='text/css' href='css/index.css'>
    
    <!-- <link rel='stylesheet' type='text/css' href='firebase/css/mainsingle.css'> -->
    <link rel='stylesheet' type='text/css' href='../css/footer.css'>
    <!-- <link rel='stylesheet' type='text/css' href='firebase/css/mainFirebase.css'> -->
    <script src="https://kit.fontawesome.com/a076d05399.js"></script>
    <title>Freddy | HomePage</title>
    
	<style>
	#title{
		font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        color: #96d1f3;
        font-size: xx-large;
		padding-bottom:30px;
		}
	#message{
		font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman', serif;
        
        font-size: x-large;
		}
	</style>
  </head>

  <body>
    <nav>
        <input type="checkbox" id="check">
        <label for="check" class="checkbtn">
<i class="fas fa-bars"></i>

        </label>
        <label class='heading'>F<sup>K</sup><i><sub>7</sub></i></label>
                      
        <ul>
          <li><a href="index.html"><i class="fas fa-home"></i> About me</a></li>
            <li><a href="index.html"><i class="fa fa-wrench" aria-hidden="true"></i>My service</a></li>
            <li><a href="userBlogs.html" class="active"><i class="fas fa-blog"></i>Blog</a></li>
            <li><a href="userPortofolio.html"><i class="fas fa-briefcase"></i>Portofolio</a></li>
            <li><a href="contact.html"><i class="fa fa-fw fa-envelope"></i>Contact</a></li>
            <li><a href="signup.html"><i class="fas fa-user"></i> Account</a></li>
      </ul>
       
    </nav>


    <main>
      <div class="main">
        <section>
            <div class='singlecontainer'>
            
                    <div name="article" id="articleform">
                      <div id='title'></div>
					
                    <div id='bodie'></div>
                    <div id='conclusion'></div>
                       
                        
                      </form>
					  <left>
					  <div id='comment'><h1>Comment here</h1>
                <div id='comment-list' style="list-style: none;"></div>
                <div>
        <h2 style='text-align:left'>Leave a Reply</h2>
        <form id='commentForm' onsubmit="return true;">
        <div><input type='text' name='names' class='input-type' id='names' placeholder='Names' style='width:62%;'></div>
            <div><textarea name='coment' class='messcoment' style='height:150px;' id='coment' placeholder='New Comment.....'></textarea></div>
                </article>
                
                <input type="submit" class="button" id="commment" value="Post Comment">
                            </form>
                            </div>
                            </left>
            </div>
			

               </section>
               </main>
               <div id='footer'>
                <!-- <section class="social-media">
                    
                
                        <a href='https://web.facebook.com/kaberuka.freddy'target='_blank'><img src='img/f_logo_RGB-Hex-Blue_512.png' height="30px"></a>
                        <a href='https://twitter.com/trojanx07'target='_blank'><img src='img/Twitter_Logo_Blue-150x150.png'height="30px"></a>
                        <a href='https://www.linkedin.com/in/kaberuka-freddy-853b08153/' target='_blank'><img src='img/In-2C-54px-R.png'height="30px"></a>
                                  
                        <a href='https://github.com/freddykaberuka/'target='_blank'><img src='img/Github-512.png' height="30px"></a> -->
                        <footer>
                            <p>copyright&copy;KABERUKA 2020</p>
                        </footer>
                </section>
            </div>
                </body>
         <script>
            // Your web app's Firebase configuration
            // For Firebase JS SDK v7.20.0 and later, measurementId is optional
            var firebaseConfig = {
              apiKey: "AIzaSyAWOqIIq8EyXgPUKuTpuchYAb9vOiYe_PM",
              authDomain: "personal-web-3a06e.firebaseapp.com",
              databaseURL: "https://personal-web-3a06e.firebaseio.com",
              projectId: "personal-web-3a06e",
              storageBucket: "personal-web-3a06e.appspot.com",
              messagingSenderId: "874381349679",
              appId: "1:874381349679:web:5fdd7f95d87526bcaa87da",
              measurementId: "G-7CGQY88TGJ"
            };
            // Initialize Firebase
            firebase.initializeApp(firebaseConfig);
            const db=firebase.firestore();
            const auth=firebase.auth();
            //db.settings({timestampsInSnapshots: true});

            var id=window.location.hash.replace('#','');
            const viewing = document.querySelector('#articleform');
            db.collection('articles').doc(id).get().then(art=>{
            
            document.getElementById('title').innerHTML=art.data().title;
            document.getElementById('bodie').innerHTML=art.data().bodie;
            document.getElementById('conclusion').innerHTML=art.data().conclusion;
  
            });
            const form = document.querySelector('#commentForm');
                form.addEventListener('submit', (e) => {
                  e.preventDefault();
                  if (names !=='' && coment!=='') {
                    firebase.auth().onAuthStateChanged((user) => {
                    if (user) {
                      db.collection('comments').add({
                        names: form.names.value,
                        coment: form.coment.value,
                      });
                      alert('comment added');
                      form.names.value = '';
                      form.coment.value = '';
                    
                    }else{
                      alert('please login first');
                      location.reload();
                  }
                });
              }else{
                    alert('fill form to submit');
                  }
                });
                
          
          
            
      
          
          //comment
          const messageList = document.querySelector('#comment-list');
function queries(doc) {
    let li = document.createElement('div');
    li.className='comments-liste',
    li.style.float=' center';
    li.style.width= '60%';
    li.style.height='auto';
    li.style.padding='8px';
    // li.style.color='white';
  
    var names = document.createElement('p');
    names.style.fontsize=100;
    names.style.color = 'white';

    var coment = document.createElement('p');
    coment.style.fontsize=100;
    coment.style.color = 'white-dark';
    

    li.setAttribute('data-id', doc.id);
    names.textContent = doc.data().names;
    coment.textContent = doc.data().coment;


    li.appendChild(names);
    li.appendChild(coment);
    messageList.appendChild(li);
}
    // getting data
    db.collection('comments').get().then(snapshot => {
        snapshot.docs.forEach(doc => {
            queries(doc);
        });
    });
        </script>
        <script type='javascript' src='js/comment.js> </scrip>
        
    </html> 